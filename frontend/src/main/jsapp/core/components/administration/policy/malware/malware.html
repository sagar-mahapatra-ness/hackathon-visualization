<div layout="column" layout-align="start stretch" flex class="policy-details-page admin-page " >
    <div class="policy-desciption-content policy-table-page" flex >
        <md-toolbar layout="row" layout-align="space-between none" class="admin-toolbar">
            <div style="line-height: 2;">
                {{ 'admin.policy.malwarePolicy.heading' | translate}}
            </div>
            <div class="control-tray" layout="row">
                <md-button class="md-icon-button md-primary md-hue-3" aria-label="search" ng-click="toggleSearchBar($event)">
                    <md-tooltip md-delay="250" md-direction="bottom">
                        Search
                    </md-tooltip>
                    <md-icon>search</md-icon>
                </md-button>
                <md-button ng-if="is_create_policy" ng-disabled="promiseCompleted" class=" md-hue-3 addNewTypePolicy" aria-label="add" ng-click='callpopupToAddNew($event)'>
                    <md-icon class="icon-18">add_circle_outline</md-icon> Add
                </md-button>
            </div>
        </md-toolbar>
        <md-table-container>
            <table md-table md-row-select ng-model="policyselected" md-progress="promise">
                <thead md-head>
                    <tr md-row>
                        <!-- UPDATE THIS BLOCK FOR CUSTOM COLUMN HEADERS -->
                        <!--<th md-column><span>Status</span></th>   //COMMENTING AS PER SUGGESTED BY MANOJ -->
                        <th md-column><span style="margin-left: 124px;" class="policy-name">Name</span></th>
                        <th md-column><span>Tenant</span></th>
                        <!-- <th md-column><span>Assignment Count (Groups)</span></th>
                        <th md-column><span>Created By</span></th> -->
                        <th md-column><span>Last Updated</span></th>
                        <!-- END -->
                    </tr>
                    <tr class="searchbar" ng-show="isSearchBarOpen">
                        <td class="search-name-padding">
                            <search datalist='malwarePolicyData' searchconfig='{listname:"malwarePolicyData", searchkeylocale: "!", key:"name"}' showicon='false'></search>
                        </td>
                        <td>
                            <search datalist='malwarePolicyData' searchconfig='{listname:"malwarePolicyData", searchkeylocale: "!", key: "tenantName"}' showicon='false'></search>
                        </td>
                        <!-- <td>  <search datalist='malwarePolicyData' searchconfig='{listname:"malwarePolicyData", searchkeylocale: "!", key: "tenantName"}' showicon='false'></search> </td>
                        <td>  <search datalist='malwarePolicyData' searchconfig='{listname:"malwarePolicyData", searchkeylocale: "!", key: "tenantName"}' showicon='false'></search> </td> 
                        <td> <search datalist='malwarePolicyData' searchconfig='{listname:"malwarePolicyData", searchkeylocale: "!", key: "modifiedDate"}' showicon='false'></search></td>-->
                    </tr>
                </thead>
                <tbody md-body>
                    <tr md-row md-auto-select md-select="policy" md-select-id="name" ng-repeat="policy in malwarePolicyData | limitTo: query.limit: (query.page - 1) * query.limit" ng-mouseenter="hover = true" ng-mouseleave="hover = false">
                        <!-- ng-click='goToPolicy(policy.id,"malware")' -->
                        <td md-cell  class="policy-name-header" style="cursor: pointer;">
                            <md-button ng-class="{show : hover}" ng-if="is_delete_policy" ng-disabled="promiseCompleted" class="md-icon-button md-primary md-hue-3" aria-label="delete" ng-click='deleteMalwarePolicy(policy)'>
                                <md-tooltip md-delay="250" md-direction="bottom">
                                    Delete Policy
                                </md-tooltip>
                                <md-icon class="icon-18">delete</md-icon>
                            </md-button>
                            <md-button ng-class="{show : hover}" ng-if="is_create_policy" ng-disabled="promiseCompleted" class="md-icon-button md-primary md-hue-3" aria-label="refresh" ng-click='callpopupDuplicatePolicy(policy)'>
                                <md-tooltip md-delay="250" md-direction="bottom">Duplicate Policy 
                                </md-tooltip>
                                <md-icon class="icon-18">content_copy</md-icon>
                            </md-button>
                            <span ui-sref="home.policy.malwaredetail({policyId: policy.id})">
                            <div style="display: inline;" ng-show="policy.newPolicy === true"><span class="new-policy-added">New</span><span>{{policy.name}}</span></div>
                            <div style="display: inline;" ng-show="policy.newPolicy !== true"><span class="policy-name">{{policy.name}}</span><span ng-show="policy.duplicatedPolicy === true" style="color: #4a90e2;margin-left:10px;">  Click to edit name & settings</span>
                            </div>
                            </span>
                        </td>
                        <td md-cell><span>{{policy.tenantName}}</span></td>
                        <!-- <td md-cell><span class="policy-title" ng-click="showAssignmentCountPopUp($event,policy.name)">6</span></td>
                        <td md-cell><span>-</span></td> -->
                        <td md-cell><span>{{policy.lastModified | date:'MM/dd/yyyy'}}<!-- {{policy.modifiedDate}} --></span></td>
                        <!-- END -->
                    </tr>
                </tbody>
            </table>
        </md-table-container>
    </div>
    <!-- <div class="noOfPolicyLength">{{malwarePolicyData.length}} Policies</div> -->
    <!-- </md-content> -->
    <div flex></div>
    <div class="policy-page-footer">
        <md-content layout="row" layout-align="start center" class="admin-footer" >
            <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="{{(malwarePolicyData.length) ? malwarePolicyData.length : 0 }}" md-page-select>
            </md-table-pagination>
        </md-content>
    </div>
</div>
